!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var l=t||window.event,n=h.call(arguments,1),d=0,f=0,c=0,g=0,u=0,w=0;if(t=e.event.fix(l),t.type="mousewheel","detail"in l&&(c=-1*l.detail),"wheelDelta"in l&&(c=l.wheelDelta),"wheelDeltaY"in l&&(c=l.wheelDeltaY),"wheelDeltaX"in l&&(f=-1*l.wheelDeltaX),"axis"in l&&l.axis===l.HORIZONTAL_AXIS&&(f=-1*c,c=0),d=0===c?f:c,"deltaY"in l&&(c=-1*l.deltaY,d=c),"deltaX"in l&&(f=l.deltaX,0===c&&(d=-1*f)),0!==c||0!==f){if(1===l.deltaMode){var p=e.data(this,"mousewheel-line-height");d*=p,c*=p,f*=p}else if(2===l.deltaMode){var v=e.data(this,"mousewheel-page-height");d*=v,c*=v,f*=v}if(g=Math.max(Math.abs(c),Math.abs(f)),(!s||s>g)&&(s=g,a(l,g)&&(s/=40)),a(l,g)&&(d/=40,f/=40,c/=40),d=Math[d>=1?"floor":"ceil"](d/s),f=Math[f>=1?"floor":"ceil"](f/s),c=Math[c>=1?"floor":"ceil"](c/s),r.settings.normalizeOffset&&this.getBoundingClientRect){var m=this.getBoundingClientRect();u=t.clientX-m.left,w=t.clientY-m.top}return t.deltaX=f,t.deltaY=c,t.deltaFactor=s,t.offsetX=u,t.offsetY=w,t.deltaMode=0,n.unshift(t,d,f,c),o&&clearTimeout(o),o=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,n)}}function i(){s=null}function a(e,t){return r.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var o,s,l=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(e.event.fixHooks)for(var d=l.length;d;)e.event.fixHooks[l[--d]]=e.event.mouseHooks;var r=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=n.length;i;)this.addEventListener(n[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",r.getLineHeight(this)),e.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=n.length;i;)this.removeEventListener(n[--i],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),a=i["offsetParent"in e.fn?"offsetParent":"parent"]();return a.length||(a=e("body")),parseInt(a.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});var dh=$(window).height(),dw=$(window).width(),bgWidth=4972,bgHeight=700,bgMaxHeight=760,whRatio=bgWidth/bgHeight,getActualSize=function(){{var e,t=$(window).height();$(window).width()}return e=t>=bgHeight?bgMaxHeight>=t?t:bgMaxHeight:bgHeight,{width:4972/bgHeight*e,height:e}},resetBg=function(){dh=$(window).height(),dw=$(window).width();var e=getActualSize(),t=e.width,i=e.height,a=$(".site-content").offset();$(".site-content").height(i).width(t),$(".extended-bg").height(dh).width(t);var o=-1*a.left+dw-t;o>0&&($(".site-content").css({left:$(".site-content").offset().left+o+"px"}),$(".extended-bg").css({left:$(".site-content").offset().left+o+"px"}));var s=Math.abs(a.left)/($(".site-content").width()-$(window).width()),l=$(".progress-bar").width(),n=(.9*l-32)*s+.05*l;$(".progress-indicator").css({left:n+"px"})},resetDog=function(){$(".sitting-dog").width(351*$(window).height()/bgHeight)},resetHotspot=function(){var e=47/700*$(window).height(),t=e,i=getActualSize(),a=i.width;$(".hotspot").each(function(){$(this).width(t).height(e),$(this).css({left:$(this).attr("px")/bgWidth*a+"px",top:$(this).attr("py")/bgHeight*i.height+"px"})})},resetHotspotCt=function(){$(".hotspot-ct > div").each(function(){var e=$(this).attr("width"),t=$(this).attr("height"),i=t/bgHeight*$(window).height(),a=i*e/t,o=($(window).height()-i)/2;$(this).height(i).width(a).css({top:o+"px"})})},resize=function(){resetBg(),resetDog(),resetHotspot(),resetHotspotCt();var e=24/556,t=$(".dump-contract").height()*e+"px";$(".sisters-count").css({"font-size":t}),$(".video-2-3-title span").css({"font-size":Math.round($(".video-2-3-title").height()/3)+"px"}),$(".left-video-title").css({"font-size":Math.round($(".video-2-3-title").height()/3*1.2)+"px"})},scrollBg=function(e){var t=$(".site-content").offset(),i=getActualSize(),a=i.width;if(e>0)t.left<0&&($(".site-content").css({left:t.left+Math.abs(Math.abs(t.left)>Math.abs(e)?e:t.left)+"px"}),$(".extended-bg").css({left:t.left+Math.abs(Math.abs(t.left)>Math.abs(e)?e:t.left)+"px"}));else if(t.left+$(window).width()<a){var o=a-(Math.abs(t.left)+$(window).width());$(".site-content").css({left:t.left-Math.abs(Math.abs(o)>Math.abs(e)?e:o)+"px"}),$(".extended-bg").css({left:t.left-Math.abs(Math.abs(o)>Math.abs(e)?e:o)+"px"})}if(t.left<0){var s=Math.abs(t.left)/($(".site-content").width()-$(window).width()),l=$(".progress-bar").width(),n=(.9*l-32)*s+.05*l;$(".progress-indicator").css({left:n+"px"})}};$(window).resize(function(){resize()});var wheeldelta={x:0,y:0},wheeling,leftOffset,vertical=!0;$(window).on("mousewheel",function(e){var t=getActualSize(),i=t.width;if(e.preventDefault(),wheeldelta.x+=e.deltaFactor*e.deltaX,wheeldelta.y+=e.deltaFactor*e.deltaY,!wheeling){console.log("start wheeling!");var a=$(".site-content").offset(),o=a.left;$(".progress").fadeIn(100);{Math.tan(15*Math.PI/180)}vertical=0==Math.abs(e.deltaY)?0:!0}clearTimeout(wheeling),wheeling=setTimeout(function(){console.log("stop wheeling!"),wheeling=void 0,wheeldelta.x=0,wheeldelta.y=0;var e=$(".site-content").offset(),t=o-e.left;0!==t&&(Math.abs(e.left)/i>=699/bgWidth?$(".sitting-dog").show():$(".sitting-dog").hide()),$(".progress").fadeOut(800)},250);var a=$(".site-content").offset();Math.abs(a.left)/i<699/bgWidth?$(".sitting-dog").fadeOut():$(".sitting-dog").is(":visible")||$(".sitting-dog").fadeIn(),console.log("delta x : "+e.deltaX+"delta y : "+e.deltaY);Math.tan(5*Math.PI/180);console.log("vertical L "+vertical),vertical?scrollBg(e.deltaY*e.deltaFactor):(console.log("step x : "+wheeldelta.x+"step y : "+wheeldelta.y),scrollBg(e.deltaX*e.deltaFactor))});var rotating,rotateIndex=0,rotateMag=function(){clearTimeout(rotating),rotating=setTimeout(rotateMag,3e3),++rotateIndex>3&&(rotateIndex%=4),$(".mag-page-ct.active").fadeOut(500,function(){$(this).removeClass("active").addClass("inactive"),$("#mag-page-"+rotateIndex).fadeIn(500,function(){$(this).removeClass("inactive").addClass("active")})}),3!=rotateIndex&&$(".mag-page-3-vplayer-ct").fadeOut(function(){$(this).find(".video_player").html("")})},magzineVideo="<iframe height=100% width=100% src='http://static.youku.com/v/swf/qplayer.swf?VideoIDS=XODkxMDU5MjAw&isAutoPlay=true&isShowRelatedVideo=false&embedid=-&showAd=0' frameborder=0 allowfullscreen></iframe>",video2_1_1="<iframe height=100% width=100% src='http://static.youku.com/v/swf/qplayer.swf?VideoIDS=XODgyNzQzOTQ4&isAutoPlay=true&isShowRelatedVideo=false&embedid=-&showAd=0' frameborder=0 allowfullscreen></iframe>",video2_3=["<iframe height=100% width=100% src='http://static.youku.com/v/swf/qplayer.swf?VideoIDS=XOTAyOTU1NDky&isAutoPlay=true&isShowRelatedVideo=false&embedid=-&showAd=0' frameborder=0 allowfullscreen></iframe>","<iframe height=100% width=100% src='http://static.youku.com/v/swf/qplayer.swf?VideoIDS=XOTAyOTU2MzI4&isAutoPlay=true&isShowRelatedVideo=false&embedid=-&showAd=0' frameborder=0 allowfullscreen></iframe>","<iframe height=100% width=100% src='http://static.youku.com/v/swf/qplayer.swf?VideoIDS=XOTAyOTU3ODI4&isAutoPlay=true&isShowRelatedVideo=false&embedid=-&showAd=0' frameborder=0 allowfullscreen></iframe>","<iframe height=100% width=100% src='http://static.youku.com/v/swf/qplayer.swf?VideoIDS=XOTAxMDY1ODcy&isAutoPlay=true&isShowRelatedVideo=false&embedid=-&showAd=0' frameborder=0 allowfullscreen></iframe>"],video2_4_1="<iframe height=100% width=100% src='http://static.youku.com/v/swf/qplayer.swf?VideoIDS=XOTAxMTUzOTI0&isAutoPlay=true&isShowRelatedVideo=false&embedid=-&showAd=0' frameborder=0 allowfullscreen></iframe>";$(function(){resize(),$(".hotspot").click(function(){var e=$(this).attr("id"),t="#"+e+"-ct",i="#"+e+"-player";$(t).fadeIn(function(){"hotspot-1"===e&&(rotating=setTimeout(rotateMag,3e3)),"hotspot-2-1"==e?$(i)&&$(i).html(video2_1_1):"hotspot-2-4"==e?$(i)&&$(i).html(video2_4_1):"hotspot-2-3"==e&&$("#hotspot-2-3-player").html(video2_3[0]),$(".video-2-3-title span").css({"font-size":Math.round($(".video-2-3-title").height()/3)+"px"}),$(".left-video-title").css({"font-size":Math.round($(".video-2-3-title").height()/3*1.2)+"px"})})}),$(".hotspot-close").click(function(){$(this).parent().parent().fadeOut(),$(this).parent().find(".video_player").each(function(){$(this).html("")}),$(".mag-page-3-vplayer-ct").fadeOut()}),$(".mag-nav-mask").mouseover(function(){clearTimeout(rotating);var e=$(this).attr("val");$(".mag-page-ct").stop(!0,!0).hide(),$(".mag-page-ct.active").fadeOut(500,function(){$(this).removeClass("active").addClass("inactive"),$("#mag-page-"+e).removeClass("inactive").addClass("active"),$("#mag-page-"+e).fadeIn(500,function(){})}),3!=e&&$(".").fadeOut(function(){$(this).find(".video_player").html("")})}),$(".next-page-arrow").click(function(){var e="-"+$(this).parent().width()+"px";$(this).parents(".slide-wrapper").animate({marginLeft:e},600)}),$(".prev-page-arrow").click(function(){$(this).parents(".slide-wrapper").animate({marginLeft:"0"},600)}),$(".mag-page-3-video-preview").click(function(){clearTimeout(rotating),$(".mag-page-3-vplayer-ct").fadeIn(function(){$(this).find(".video_player").html(magzineVideo)})}),$(".mag-page-3-vplayer-ct").hover(function(){$(".video_player_close").fadeIn()}),$(".video_player_close").click(function(){$(".mag-page-3-vplayer-ct").fadeOut(function(){$(this).find(".video_player").html("")})}),$(".video-2-3-preview").click(function(){var e=$(this).parents("li").index();$(".left-video-title").html($(this).parent().find(".video-2-3-title").html()),$("#hotspot-2-3-player").html(video2_3[e])})});